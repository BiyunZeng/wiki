# 以太坊公私钥应用  

## 简介  

&emsp;&emsp;以太坊沿用了比特币的数字签名算法ECDSA-secp256k1，只有哈希算法不一样，比特币用的是sha256,以太  
坊中用的是sha3的Keccak256；  

### 私钥
&emsp;&emsp;以太坊的私钥是一个32字节的数，取值范围从1~0xFFFF FFFF FFFF FFFF FFFF FFFF FFFF FFFE BAAE DCE6 AF48 A03B BFD2 5E8C D036 4140。这个数可以由伪随机算法(PRNG)产生。其实0也是一个合法的私钥，只不过这是一个特殊私钥，以太坊的创世区块就是这个私钥生成的。  
### 公钥  
&emsp;&emsp;以太坊的公钥采用uncompressed模式，生成的私钥为长度32的16进制字串，公钥为长度64字节，32字节表示椭圆曲线的X坐标，32字节表示椭圆曲线的Y坐标。这个XY坐标是私钥通过ECDSA-secp256k1推导出来的。所以说，椭圆曲线算法的公钥是通过私钥计算出来的。而反过来，用公钥推导私钥，以现有计算机的计算几乎是不可能的，这也是以太坊和比特币存在的基础。  

### 签名  
&emsp;&emsp;签名其实就是用私钥对消息的哈希值进行加密。当一个以太坊节点向另一个节点发送消息时，会用自己的私钥将消息的哈希做签名，然后吧签名和消息本身发送给对方。在以太坊的交易数据结构中会有 V R S 这三个字段，即为交易的签名数据，可从这三个字段中恢复出公钥。  

### 验证  
&emsp;&emsp;节点收到对方发来的消息和签名后，会执行“Ecrecover”函数，用消息和签名推导出对方的公钥。再通过公钥，签名，消息的哈希值计算出一个叫“r”的值，这个r是签名的一部分，校验签名就是拿计算出来的r和签名中携带的r经行对比，如果一致就校验通过。  
