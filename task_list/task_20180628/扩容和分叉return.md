---
    title: 2018-7-6 扩容和分叉 
tags: 区块链
grammar_cjkRuby: true
---
# 扩容
在比特币诞生之初，中本聪并没有特意限制区块的大小，它们在其自身数据结构的控制下最大可以达到 32MB。在当时，平均被打包的区块大小为 1-2KB，有人认为区块链上限过高容易造成计算资源的浪费，还容易发生 DDOS 攻击。因此，为了保证比特币系统的安全和稳定，中本聪决定临时将区块大小限制在 1MB。

如果按照每笔交易占 250B，平均每十分钟产生一个区块的速度计算，比特币网络理论上每秒最多可以处理 7 笔交易。那时比特币的用户数量少，交易量也没有那么大，这个交易速度并不会造成区块链网络的拥堵。直到 2013 年后半年，比特币价格直线飙升，用户体量越来越大，比特币网络拥堵交易费用上升的问题才逐渐涌现出来。

到现在，比特币区块链上最高时有上万笔交易积压，比特币的平均交易费用比 2010 年 9 月上涨了 376 倍，每秒 7 笔交易的处理速度已经明显无法满足用户需求， 扩容问题成了比特币社区议论的热点。
扩容的问题就需要引导到分叉上去
# fork分叉
分叉是分布式共识的副产物，只要两个矿工几乎同时发现区块就会发生分叉。当后续区块添加到其中一个区块，这种不确定性就会消失；使这个链最长，另一个区块则被网络“孤立”或“抛弃”
当开发者想修改决定交易是否成立的软件规则，也可以自愿对网络进行分叉。

当一个区块包含无效交易，该区块将被网络忽略，发现这个区块的矿工就会失去区块奖励。因此通常矿工只想挖到有效区块，并加入最长的链。

以下是一些常见分叉及特征。



比特币协议不作更改时，即绝大多数时间里比特币系统运行时，所有节点追随最长链。请记住这一条规则，这是所有节点都应当遵守的规则，除非最长链在节点看来是包含了非法的区块。
### 硬分叉



硬分叉是软件升级，将不兼容旧软件的新规则引入网络。你可以将它看作规则的延伸（使区块大小为2MB，而不是1MB的新规则将需要硬分叉）。

分叉后，继续运行旧版软件的节点将发现新交易是无效的。因此为了切换到新链继续挖有效区块，所有网络节点必须升级为新规则。



当出现某种政治僵局，社区部分人坚持旧规则，就会出现问题。旧链的哈希率、网络算力将变得不合时宜。重要的是，旧链的数据和规则仍被看作具备价值，矿工当然希望继续挖矿，开发者也希望继续支持它。

比特币的硬分叉
1BTH  比特现金   
2BTG  比特黄金
3SBTC 超级比特币
4BCD  比特钻石
这是上线成功的硬分叉
现在有两个——ETC和ETH，两个硬分叉

 

### 软分叉



软分叉是指协议规则收紧。这样新规则部署后，新规则是旧规则的一个子集，未升级的节点并不会认为新规则的区块是非法的。所以简单想，软分叉不升级的节点并不会主动分裂出去，并且依然追随最长链规则。但软分叉也有可能会造成区块链分裂。只要加上追随最长链这个规则就可以想明白。



软分叉造成区块链分裂的风险主要是升级过程中支持的算力过小。只要执行软分叉的算力不占有绝对的优势，无法使用追随最长链规则孤立掉不升级的算力打包的区块，那就会分裂。



这和硬分叉造成分裂的风险是一样的。因为从原理上，硬分叉中不升级的节点就是对已经升级的节点发起的一次软分叉（规则收紧）。



    避免硬分叉和软分叉造成分裂的办法也都是一样——使用更大的算力阈值才允许部署。考虑到出块幸运值的原因，至少要75%算力才可以保持安全。
