# 共识机制
## 何为共识机制：
共识机制是指可以使所有节点对某一种状态达成一致的方式。

## 为什么需要共识机制：
有共识机制去中心化才有意义，才具备可信度，否则只是数据共享，拿比特币来说就是决定由谁记账，并且保持账本的一致性。

## 主流的共识机制：
### 一 .PoW 即工作量证明
比特币所谓的比特币挖矿就是通过计算符合某一个比特币区块头的哈希散列值争夺记账权。这个过程需要通过大量的计算实现，简单理解就是你进行的计算量大（工作量大），你就有大概率获得记账权。
* 特点:
算一道很难的谜题,系统给予挖矿奖励,多劳多得【社会主义】
* 优点:
1. 所有节点均可参与,记账权公平的分派到每个节点,去中心化
2. 多劳多得,矿工积极性高
3. 安全性高,欺诈成本高,如果能够欺诈成功,那么做诚实节点收益更大
* 缺点:
1. 主流矿池垄断严重,存在51%算力攻击风险(比特大陆)
2. 浪费资源严重(2018年底消耗全球0.5%电量)
3. 持币人没有话语权,算力决定一切
4. 网络性能低,共识时间长
* 项目: 比特币, 比原链等


### 二 .POS 即股权证明
简单理解就是根据资产的多寡分配获取记账权的概率,根据你持有货币的量和时间,给你发利息的一个制度,类似股份公司中的股东。
先引入一个概念:币龄.币龄=币量x持有天数。当你获得利息后，你的持币天数清零，币龄也被清空。比如，你有100个币，持有了30天，那么，你的币龄=100x30=3000。这时，如果发现一个POS区块，你的币龄就被清0。每清空365币龄（模仿一年365天的年利率），你就能从区块中获得利息。如果该利率是5%，那么一年下来，总利息=3000*5%=150个币。

* 特点:
不挖矿,依靠币龄(币持有数量 * 持有天数)决定记账权,利息即为奖
励,记账后币龄清零,按钱分配,钱生钱【资本主义】
* 优点:
1. 在一定程度上缩短了共识达成的时间
2. 节约资源
3. 防作弊,币龄越大,获得记账权几率越大,避免51%攻击,因为攻击会使自己权益受损
* 缺点:
数字货币过于集中化,富者越来越富有,散户参与积极性低
* 项目:ADA 等

### 三 .DPOS 即委托权益证明
DPOS与POS原理相同，只是选了一些“董事代表”, 其原理是让每一个持币人进行投票，由此产生一定数量的代表(超级节点或者矿池），由这些超级节点代理持币人验证和记账。而这些超级节点的权利是相等的。比如，EOS将产生21个主节点
* 特点:不挖矿,每年按比例增发代币,奖励超级节点
* 优点:高效、扩展性强
* 缺点:非去中心化,而是多中心化
* 项目:EOS等

### 四 .PBFT 实用拜占庭容错
实用拜占庭容错算法是一种基于消息传递的一致性算法。该算法经过预准备（Pre-prepare）、准备（Prepare）和确认（Commit）三个阶段达成一致性。这些阶段可能因为失败而重复进行。实用拜占庭容错算法信息在节点之间互相交换后，各节点列出所有得到的信息最后以大多数的结果作为解决方法。
* 特点:在 N ≥ 3F + 1 的情况下一致性是可能解决。其中，N为计算机总数，F为有问题计算机总数。信息在计算机间互相交换后，各计算机列出所有得到的信息，以大多数的结果作为解决办法。
* 优点:算法通过投票达成共识可以很好得解决包括分叉的问题同时提升网络效率。
* 缺点:可扩展性差。





































