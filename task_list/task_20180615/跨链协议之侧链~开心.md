# 跨链协议之侧链

# 什么是跨链技术？

我们都知道区块链是分布式总账的一种。一条区块链就是一个独立的账本，两条不同的链，就是两个不同的独立的账本，两个账本没有关联。本质上价值没有办法在账本间转移，但是对于具体的某个用户，用户在一条区块链上存储的价值，能够变成另一条链上的价值，这就是价值的流通。

跨链，顾名思义，就是通过一个技术，能让价值跨过链和链之间的障碍，进行直接的流通。跨链本质上和货币兑换是一样的。跨链并没有改变每个区块链上的价值总额，只是不同的持有人之间进行了一个兑换而已。

跨链技术的核心要素之一是：帮助一条链上的用户Alice找到另一条链上的愿意进行兑换的用户Bob。从业务角度看，跨链技术就是一个交易所，让用户能够到交易所里进行跨链交易。严格来说，币币交易所就是一个跨链技术的实现。


跨链技术可以理解为连接各区块链的桥梁，其主要应用在于实现各区块链之间的原子交易、资产转换、区块链内部信息互通，它链信息的读取和验证，解决oracle问题

## 为什么一般的公链不支持跨链？
因为跨链难，每个节点要有单独验证的能力，而且要去中心化的输入，区块链不光是跨链难，对于外部世界的信息获取和验证都难（这就是oracle问题）



但是由于区块链之间互不连通、资产价值的大幅波动大大制约了区块链技术的应用和发展。所以链与链之间的互联操作越来越被重视，跨链的需求就由此而来。但是，跨链是一个复杂的过程，既需要对链中节点要有单独的验证能力，也需要去中心化的输入，更需要对链外世界的信息进行获取和验证。因此有不少项目都支持跨链技术了。

目前，跨链技术主要有四种实现模式：

 - 1）公证人模式
 - 2）侧链
 - 3）哈希锁定
 - 4）分布式私钥控制

# 主要讲讲侧链技术实现跨链

### 什么是侧链？


侧链技术最初由比特币的核心开发者于2014年在论文sidechains.pdf里提出，当时他们注意到，比特币在自己的区块链上只能作为一个价值流通的载体流通，用途非常有限。而比特币核心代码的升级是需要非常谨慎的。哪有没有一种办法，能够既不会影响原来的比特币系统，又能够测试一些新的特性，进而扩展比特币的使用场景呢？这就是侧链技术的由来。

简单来讲，侧链是一种允许Token在不同的区块链之间进行安全的资产交换的技术，侧链通过一种双向锚定的机制和主链进行连接，连接以后主链上的资产就可以通过双向锚定的技术完成对侧链的充值和提现等操作。一般来说，原始的区块链被称为“主链”。通过双向锚定和主链完成连接的区块链称为“侧链”（有些项目也称之为“子链”）

![xx](https://bihu2001.oss-cn-shanghai.aliyuncs.com/img/9f9183ecf9e16d82a44cbc48334e469d.png?x-oss-process=style/size_lg)

### 主侧链之间是如何通过双向锚定的方式完成资产交换这一个过程呢？

首先，主链上的一个用户可以把自己的资产转入到一个特定的地址上。一旦资产转入到这个地址，那这笔资产就会被锁定，用户无法再对其进行花费。用户发送到该地址的交易需要等待主链的确认。这里有一个“安全等待时间”的概念，只有过了这个时间，才可以认为用户的这笔交易是不可回滚的。侧链察觉到这笔交易以后，会再自己的链上发行等量的相关资产，供用户在侧链上使用。用户从侧链提现到主链的过程也是类似，只不过流程反过来而已。


这种通过双向锚定的方式很好理解，但是会带来一个新的问题：那就是这个主链上的地址由谁来确定？如果是一个用户，那这个用户的信用如何保证？这个用户是否有把用户的资产卷走跑路的可能？如果是一个组织，那这个组织又如何确定？目前最成熟的方案是该地址由一个联盟（federation）维护，这些联盟共同维护一个多签地址，不同区块链之间资产的流动都由这个联盟来维护。假设7个知名交易所共同组成了这个联盟，每个交易所都提供一个地址，共同组成一个5-of-7的多签名地址。这就要求每一笔经过联盟的交易，都至少由5个地址进行签名才可以生效。通过分散账户来达成一定的去中心化和安全性。

### 跨链之侧链协议目前的问题-侧链攻击问题

在侧链方案中攻击者只需要破坏最薄弱的侧链，就可以破坏整个网络。一旦他们在某个侧链完成51%攻击，他们就可以创建一个（假的）最长侧链，用伪造的侧链币在原比特币块链中换成比特币。问题的本质在于，侧链们不共享同一个公共块历史

### 侧链的未来展望

1. 交易速度加快，主链分担减轻

  - 所有的交易记录都被锁定在主链上，而各种区块链应用的代码和数据都可以独立保存在侧链中，这样就可以分担主链上的交易，使交易在侧链上完成并发生转移，主链不容易产生交易拥堵，从而提升了交易速度。

2. 多条侧链并行处理，实现完全去中心化交易

  - 主链可以通过智能合约链接多条侧链，可以实现数据去中心化并且并行处理，这样一来，不单单是速度提升的方面使项目性能提升，交易数据可以完全实现去中心化，也实现了区块链之间的搭建，区块之间不再是独立的个体，而是真正实现了数据在分块之后依然是可联系的
  
3. 安全性得到保障

  - 万一侧链出现代码漏洞，主链不会受到影响，而因为去中心化的机制，部分数据的丢失对整体并无影响，交易记录一旦发生就被锁定在链上，用户不用担心丢失或篡改等问题。
  
4. 扩展空间，增强隐私保护

  - 跨链侧链技术的引入进一步扩展了区块链技术的应用范围和创新空间，使传统区块链可以支持多种资产类型，以及小微支付、智能合约、安全处理机制、财产注册等，并可以增强区块链的隐私保护。

未来的区块链系统肯定不会是现在各个区块链项目各自为战的状态。资产的跨链流通、兑换等会成为区块链平台需要提供的基础服务
