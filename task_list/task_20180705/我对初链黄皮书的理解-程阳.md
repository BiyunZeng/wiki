# 我对初链黄皮书的理解
###### 作者：程阳

初链（TrueChain，True链），旨在打造一个高性能去中心化的公开账本。去中心化的公开账本目前并不少见，比如比特币，以太坊，但他们的交易速度成了限制区块链发展的瓶颈。初链通过引进基于BFT和POW的混合共识协议，来达到高安全性和高性能的目的。

## 混合共识

混合共识的概念是Pass和Shi在2017年的论文《Efficient consensus in the permissionless model》中提出来的。初链的混合共识也是参考这篇论文，进行了一些修改和改进实现的。混合共识遵循BFT和PoW结合在一起的设计模式，使其更好的享有两边的优良特性。BFT协议作为处理大量传入交易的快速路径，PoW协议作为协议的支柱，支持BFT处理动态成员和委员切换。初链中的慢链使用的是Fruitchain，而不是Nakamoto chain，可以有效防止自私挖矿者攻击，避免交易费不稳定，降低矿池存在的必要性。

## 轮值委员会的频率

委员会在矿工中选举出来。如果本届委员会表现良好，则会增加新节点当选为委员会成员的难度，这样在某些场合可以避免交换委员会的开销。同时保留强制切换委员会的机制，在一个固定时间会强制切换委员会。另外，初链提出了Thunderella认证投诉的观点，其中慢链可以作为BFT委员会失误的证据。当委员会作恶时，第二天的起点就会触发强制切换。

以后可能会使用基于股份和随机性的混合标准来替换委员会选举规范。

## 物理时间戳限制

初链通过一个被称为粘性时间戳的限制来防止恶意重新排序的发生。即在提出交易时，客户端在交易处理的元数据中放置物理时间戳，这个物理时间戳与交易的其他部分一起签名，这样就可以保证交易的发生顺序。为了统一时间戳，防止委员会成员使用假的时间戳，初链会要求要进入委员会，节点应该提供同步时钟的证据。

## 分片技术

分片技术，初链设计了一个基于分片的投机交易处理系统，保障数据在处理过程中不会受到其他方面的影响，确保了数据的安全性。

## TVM

目前虽然可以将智能合约放在容器里，但是一个公链节点能够承载的容器数量有限，所以初链基础架构将整合EVM和类似EVM字节码执行引擎来运行智能合约。设计了初链虚拟机（TVM）。初链使用一个虚拟机来处理POW共识，另外一个虚拟机处理PBFT共识，都集成在全节点，因此它们可以处理按需调用。

## 补偿机制

黄皮书中并没有给出具体说明，只是说会借鉴Gridcoin和Golem网络。

## 个人理解

此版本黄皮书中有很多内容并没有细化说明，是一个处于早期的版本，初链已经在2018年9月份上线测试，黄皮书的版本应该还没有更新。初链最大的创新点是在它的混合共识机制，利用混合机制提升了交易的速度和安全性，但是代价也同样是牺牲了去中心化特性，通过委员会进行交易验证。要理解初链的精髓，还是要先仔细阅读混合共识和水果链的那两篇论文。
